(this["webpackJsonpbooks-app"]=this["webpackJsonpbooks-app"]||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(24),r=a.n(l),s=(a(75),a(76),a(77),a(78),a(79),a(11)),i=a(12),c=a(13),u=a(14),d=a(29),h=a(9),m=a(5),g=a.n(m),k=a(30),E=a(28),f=(a(97),a(98),a(127)),p=a(128),y=a(129),v=a(130),b=a(131),B=a(132),S=a(133),w=a(134),C=a(135),D=a(136),M=a(137),I=a(62),O=a(145),_=a(138),j=a(139),A=a(140),N=a(141),T=a(142),x=a(143),F=a(144),U=function(e){return o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement("h6",{style:{color:"blue"}},e.name)))};a(41);var W=function(){return o.a.createElement("center",null,"---- end of the list ----")};var R=function(e){return o.a.createElement(I.a,{id:"Btn1",onClick:function(){return e.greethandler2("from child")}},"Search ")},L=(n.Component,function(e){var t=e.results.map((function(t){return o.a.createElement("li",{key:t.id,onClick:function(){return e.action(t.title)}},t.title)}));return o.a.createElement("ul",null,t)}),Y=(Object({NODE_ENV:"production",PUBLIC_URL:"/books-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_KEY,"https://royliao.pythonanywhere.com/api/article/"),P=(n.Component,"https://royliao.pythonanywhere.com/api/article/"),z=(n.Component,function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={title:"",desc:"",year:"",image:null},e.handleChange=function(t){e.setState(Object(d.a)({},t.target.id,t.target.value))},e.handleImageChange=function(t){e.setState({image:t.target.files[0]})},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state);var a=new FormData;a.append("file",e.state.image,e.state.image.name),a.append("title",e.state.title),a.append("desc",e.state.desc),a.append("year",e.state.year);var n="Token "+localStorage.getItem("authcode");g.a.post("https://royliao.pythonanywhere.com/api/article/",a,{headers:{"content-type":"multipart/form-data",Authorization:n}}).then((function(t){console.log(t.data),e.setState({image:""}),e.setState({title:""}),e.setState({desc:""}),e.setState({year:""})})).catch((function(e){return console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("p",null,o.a.createElement("input",{type:"text",placeholder:"Title",id:"title",value:this.state.title,onChange:this.handleChange,required:!0})),o.a.createElement("p",null,o.a.createElement("input",{type:"text",placeholder:"desc",id:"desc",value:this.state.desc,onChange:this.handleChange,required:!0})),o.a.createElement("p",null,o.a.createElement("input",{type:"text",placeholder:"year",id:"year",value:this.state.year,onChange:this.handleChange,required:!0})),o.a.createElement("p",null,o.a.createElement("input",{type:"file",id:"image",accept:"image/png, image/jpeg",onChange:this.handleImageChange})),o.a.createElement("input",{type:"submit"})))}}]),a}(n.Component)),q="https://royliao.pythonanywhere.com/api/article/",K=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={searchkey:"",newseachkey:"",image:"",books:[],newBookData:{title:"",desc:"",year:"",file:""},headerInfo:{"content-type":"application/json","Access-Control-Allow-Origin":"*"},newBookModal:!1,editBookData:{id:"",title:"",desc:"",year:"",file:""},editBookModal:!1,mymessage:""},n.getsearch2=function(){g.a.get("".concat(q,"?search=").concat(n.state.searchkey)).then((function(e){n.setState({books:e.data},(function(){console.log("title:")}))}))},n.handleImageChange=function(e){n.setState({image:e.target.files[0]})},n.handleInputChanger=function(){n.setState({searchkey:n.search.value},(function(){n.state.searchkey&&n.state.searchkey.length>0?(n.getInfo(),n.UNSAFE_componentWillMount()):n.state.searchkey||window.location.reload(!0)}))},n.getInfo=function(){g.a.get("".concat(q,"?search=").concat(n.state.searchkey)).then((function(e){var t=e.data;n.setState({results:t})}))},n._refreshBooks=n._refreshBooks.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"toggleNewBookModal",value:function(){this.setState({newBookModal:!this.state.newBookModal})}},{key:"toggleEditBookModal",value:function(){this.setState({editBookModal:!this.state.editBookModal})}},{key:"addBook",value:function(){var e=this;g.a.post("".concat(q),this.state.newBookData,this.state.headerInfo).then((function(t){var a=e.state.books;a.push(t.data),e.setState({mymessage:"Book Title "+e.state.newBookData.title+" is added!"}),e.setState({books:a,newBookModal:!1,newBookData:{title:"",desc:"",year:""}})}))}},{key:"editBook",value:function(e,t,a,n,o){this.setState({editBookData:{id:e,title:t,desc:a,year:n,file:o},editBookModal:!this.state.editBookModal})}},{key:"updateBook",value:function(){var e=this,t=this.state.editBookData,a=t.id,n=t.title,o=t.desc,l=t.year,r=t.file;g.a.put("".concat(q)+this.state.editBookData.id+"/",{id:a,title:n,desc:o,year:l,file:r},this.state.headerInfo).then((function(t){e._refreshBooks()})),this.setState({mymessage:"Book ID "+this.state.editBookData.id+" is edited!"}),this.setState({editBookModal:!1,editBookData:{id:"",title:"",desc:"",year:""}})}},{key:"deleteBook",value:function(e){var t=this;g.a.delete("".concat(q)+e+"/").then((function(a){t._refreshBooks(),t.setState({mymessage:"Book ID "+e+" is deleted!"})}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;""===this.state.searchkey&&null===this.state.searchkey||g.a.get("".concat(q,"?search=").concat(this.state.searchkey)).then((function(t){e.setState({books:t.data})}))}},{key:"UNSAFE_componentWillMount2",value:function(){var e=this;""!==this.state.searchkey||null!==this.state.searchkey?g.a.get("".concat(q,"?search=").concat(this.state.searchkey)).then((function(t){e.setState({books:t.data})})):(window.location.reload(!0),alert("thh"))}},{key:"_refreshBooks",value:function(){var e=this;g.a.get("".concat(q)).then((function(t){e.setState({books:t.data})}))}},{key:"render",value:function(){var e=this,t=this.state.books.map((function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",{style:{textAlign:"left",color:"blue",hover:"green"},baseFontStyle:{fontFamily:"Roboto"}},o.a.createElement("a",{onClick:e.editBook.bind(e,t.id,t.title,t.desc,t.year,t.file)},t.title)),o.a.createElement("td",{style:{textAlign:"left"},baseFontStyle:{fontFamily:"Roboto"}},t.desc),o.a.createElement("td",{style:{textAlign:"left"},baseFontStyle:{fontFamily:"Roboto"}},t.year),o.a.createElement("td",null,o.a.createElement("img",{width:"50%",src:t.file,alt:""})),o.a.createElement("td",null,o.a.createElement(I.a,{color:"danger",size:"sm",onClick:e.deleteBook.bind(e,t.id)},"Delete")))}));return o.a.createElement("div",{className:"App container"},o.a.createElement("center",null,o.a.createElement("div",{class:"row"},o.a.createElement("h4",{style:{marginTop:25}},"List of Suppliers"),"\u2003",o.a.createElement(I.a,{color:"primary",style:{marginTop:25},onClick:this.toggleNewBookModal.bind(this)},"Add Book"),o.a.createElement("input",{input:!0,class:"form-control mr-sm-2",style:{marginLeft:"auto",marginTop:25,width:200},placeholder:"Search for the ..",ref:function(t){return e.search=t},onChange:this.handleInputChanger,onkeypress:"return event.keyCode!=13"}),o.a.createElement(I.a,{id:"btn26",class:"btn btn-outline-success my-2 my-sm-0",color:"primary",style:{marginTop:25},onClick:this.UNSAFE_componentWillMount2.bind(this)},"Search")))," ",o.a.createElement(U,{name:this.state.mymessage}),o.a.createElement(O.a,{isOpen:this.state.newBookModal,toggle:this.toggleNewBookModal.bind(this)},o.a.createElement(_.a,{toggle:this.toggleNewBookModal.bind(this)},"Add a new book"),o.a.createElement(j.a,null,o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"title"},"Title"),o.a.createElement(T.a,{id:"title",value:this.state.newBookData.title,onChange:function(t){var a=e.state.newBookData;a.title=t.target.value,e.setState({newBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"desc"},"Description"),o.a.createElement(T.a,{id:"desc",value:this.state.newBookData.desc,onChange:function(t){var a=e.state.newBookData;a.desc=t.target.value,e.setState({newBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"year"},"Year"),o.a.createElement(T.a,{id:"year",value:this.state.newBookData.year,onChange:function(t){var a=e.state.newBookData;a.year=t.target.value,e.setState({newBookData:a})}}))),o.a.createElement(x.a,null,o.a.createElement(x.a,null,o.a.createElement(I.a,{color:"primary",onClick:this.addBook.bind(this)},"Add Book")," ",o.a.createElement(I.a,{color:"secondary",onClick:this.toggleNewBookModal.bind(this)},"Cancel")))),o.a.createElement(O.a,{isOpen:this.state.editBookModal,toggle:this.toggleEditBookModal.bind(this)},o.a.createElement(_.a,{toggle:this.toggleEditBookModal.bind(this)},"Edit a new book"),o.a.createElement(j.a,null,o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"image"},"Image"),o.a.createElement("div",null,o.a.createElement("img",{width:"50%",src:this.state.editBookData.file,alt:""})),o.a.createElement(T.a,{type:"file",id:"image",accept:"image/png, image/jpeg",onChange:function(t){var a=e.state.editBookData;e.setState({image:t.target.files[0]}),a.file=e.state.image,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"title"},"Title"),o.a.createElement(T.a,{id:"title",value:this.state.editBookData.title,onChange:function(t){var a=e.state.editBookData;a.title=t.target.value,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"desc"},"Description"),o.a.createElement(T.a,{id:"desc",value:this.state.editBookData.desc,onChange:function(t){var a=e.state.editBookData;a.desc=t.target.value,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"year"},"Year"),o.a.createElement(T.a,{id:"year",value:this.state.editBookData.year,onChange:function(t){var a=e.state.editBookData;a.year=t.target.value,e.setState({editBookData:a})}}))),o.a.createElement(x.a,null,o.a.createElement(I.a,{color:"primary",onClick:this.updateBook.bind(this)},"Update Book")," ",o.a.createElement(I.a,{color:"secondary",onClick:this.toggleEditBookModal.bind(this)},"Cancel"))),o.a.createElement(F.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Desc"),o.a.createElement("th",null,"Year"),o.a.createElement("th",null,"Image"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,t)),o.a.createElement("center",null,o.a.createElement(W,null)))}}]),a}(n.Component),H=a(19),J="https://royliao.pythonanywhere.com/api/article/",G=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={searchkey:"",newseachkey:"",image:"",books:[],newBookData:{title:"",desc:"",year:""},headerInfo:{Authorization:"Token "+localStorage.getItem("authcode")},newBookModal:!1,editBookData:{id:"",title:"",desc:"",year:"",file:""},editBookModal:!1,mymessage:""},n.getsearch2=function(){g.a.get("".concat(J,"?search=").concat(n.state.searchkey),{headers:n.state.headerInfo}).then((function(e){n.setState({books:e.data},(function(){console.log("title:")}))}))},n.handleImageChange=function(e){n.setState({image:e.target.files[0]})},n.handleInputChanger=function(){n.setState({searchkey:n.search.value},(function(){n.state.searchkey&&n.state.searchkey.length>0?(n.getInfo(),n.UNSAFE_componentWillMount()):n.state.searchkey||window.location.reload(!0)}))},n.getInfo=function(){g.a.get("".concat(J,"?search=").concat(n.state.searchkey),{headers:n.state.headerInfo}).then((function(e){var t=e.data;n.setState({results:t})}))},n._refreshBooks=n._refreshBooks.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"toggleNewBookModal",value:function(){this.setState({newBookModal:!this.state.newBookModal})}},{key:"toggleEditBookModal",value:function(){this.setState({editBookModal:!this.state.editBookModal})}},{key:"addBook",value:function(){var e=this;g.a.post("".concat(J),this.state.newBookData,{headers:this.state.headerInfo}).then((function(t){var a=e.state.books;a.push(t.data),e.setState({mymessage:"Book Title "+e.state.newBookData.title+" is added!"}),e.setState({books:a,newBookModal:!1,newBookData:{title:"",desc:"",year:""}})}))}},{key:"editBook",value:function(e,t,a,n,o){this.setState({editBookData:{id:e,title:t,desc:a,year:n,file:o},editBookModal:!this.state.editBookModal})}},{key:"updateBook",value:function(){var e=this,t=this.state.editBookData,a=t.id,n=t.title,o=t.desc,l=t.year;g.a.put("".concat(J)+this.state.editBookData.id+"/",{id:a,title:n,desc:o,year:l},{headers:this.state.headerInfo}).then((function(t){e._refreshBooks()})),this.setState({mymessage:"Book ID "+this.state.editBookData.id+" is edited!"}),this.setState({editBookModal:!1,editBookData:{id:"",title:"",desc:"",year:""}})}},{key:"deleteBook",value:function(e){var t=this;g.a.delete("".concat(J)+e+"/",{headers:this.state.headerInfo}).then((function(a){t._refreshBooks(),t.setState({mymessage:"Book ID "+e+" is deleted!"})}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;""===this.state.searchkey&&null===this.state.searchkey||g.a.get("".concat(J,"?search=").concat(this.state.searchkey),{headers:this.state.headerInfo}).then((function(t){e.setState({books:t.data.reverse()})}))}},{key:"UNSAFE_componentWillMount2",value:function(){var e=this;""!==this.state.searchkey||null!==this.state.searchkey?g.a.get("".concat(J,"?search=").concat(this.state.searchkey),{headers:this.state.headerInfo}).then((function(t){e.setState({books:t.data.reverse()})})):window.location.reload(!1)}},{key:"_refreshBooks",value:function(){var e=this;g.a.get("".concat(J),{headers:this.state.headerInfo}).then((function(t){e.setState({books:t.data.reverse()})}))}},{key:"render",value:function(){var e=this,t=this.state.books.map((function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",{style:{textAlign:"left",color:"blue",hover:"green"},baseFontStyle:{fontFamily:"Roboto"}},o.a.createElement("a",{onClick:e.editBook.bind(e,t.id,t.title,t.desc,t.year,t.file)},t.title)),o.a.createElement("td",{style:{textAlign:"left"},baseFontStyle:{fontFamily:"Roboto"}},t.desc),o.a.createElement("td",{style:{textAlign:"left"},baseFontStyle:{fontFamily:"Roboto"}},t.year),o.a.createElement("td",null,o.a.createElement("img",{width:"50%",src:t.file,alt:""})),o.a.createElement("td",null,o.a.createElement(I.a,{color:"danger",size:"sm",onClick:e.deleteBook.bind(e,t.id)},"Delete")))}));return o.a.createElement("div",{className:"App container"},o.a.createElement("center",null,o.a.createElement("div",{class:"row"},o.a.createElement("h4",{style:{marginTop:25}},"List of Suppliers"),"\u2003",o.a.createElement(I.a,{color:"primary",style:{marginTop:25},onClick:this.toggleNewBookModal.bind(this)},"Add Book"),o.a.createElement("input",{input:!0,class:"form-control mr-sm-2",style:{marginLeft:"auto",marginTop:25,width:200},placeholder:"Search for the ..",ref:function(t){return e.search=t},onChange:this.handleInputChanger,onkeypress:"return event.keyCode!=13"}),o.a.createElement(I.a,{id:"btn26",class:"btn btn-outline-success my-2 my-sm-0",color:"primary",style:{marginTop:25},onClick:this.UNSAFE_componentWillMount2.bind(this)},"Search")))," ",o.a.createElement(U,{name:this.state.mymessage}),o.a.createElement("hr",null),o.a.createElement(O.a,{isOpen:this.state.newBookModal,toggle:this.toggleNewBookModal.bind(this)},o.a.createElement(_.a,{toggle:this.toggleNewBookModal.bind(this)},"Add a new book"),o.a.createElement(j.a,null,o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"title"},"Title"),o.a.createElement(T.a,{id:"title",value:this.state.newBookData.title,onChange:function(t){var a=e.state.newBookData;a.title=t.target.value,e.setState({newBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"desc"},"Description"),o.a.createElement(H.d,{type:"textarea",id:"desc",value:this.state.newBookData.desc,onChange:function(t){var a=e.state.newBookData;a.desc=t.target.value,e.setState({newBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"year"},"Year"),o.a.createElement(T.a,{id:"year",value:this.state.newBookData.year,onChange:function(t){var a=e.state.newBookData;a.year=t.target.value,e.setState({newBookData:a})}}))),o.a.createElement(x.a,null,o.a.createElement(x.a,null,o.a.createElement(I.a,{color:"primary",onClick:this.addBook.bind(this)},"Add Book")," ",o.a.createElement(I.a,{color:"secondary",onClick:this.toggleNewBookModal.bind(this)},"Cancel")))),o.a.createElement(O.a,{isOpen:this.state.editBookModal,toggle:this.toggleEditBookModal.bind(this)},o.a.createElement(_.a,{toggle:this.toggleEditBookModal.bind(this)},"Edit a new book"),o.a.createElement(j.a,null,o.a.createElement(A.a,null,o.a.createElement("div",null,o.a.createElement("img",{width:"50%",src:this.state.editBookData.file,alt:""}))),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"title"},"Title"),o.a.createElement(T.a,{id:"title",value:this.state.editBookData.title,onChange:function(t){var a=e.state.editBookData;a.title=t.target.value,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"desc"},"Description"),o.a.createElement(H.d,{type:"textarea",value:this.state.editBookData.desc,rows:"5",onChange:function(t){var a=e.state.editBookData;a.desc=t.target.value,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"year"},"Year"),o.a.createElement(T.a,{id:"year",value:this.state.editBookData.year,onChange:function(t){var a=e.state.editBookData;a.year=t.target.value,e.setState({editBookData:a})}}))),o.a.createElement(x.a,null,o.a.createElement(I.a,{color:"primary",onClick:this.updateBook.bind(this)},"Update Book")," ",o.a.createElement(I.a,{color:"secondary",onClick:this.toggleEditBookModal.bind(this)},"Cancel"))),o.a.createElement(F.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Desc"),o.a.createElement("th",null,"Year"),o.a.createElement("th",null,"Image"),o.a.createElement("th",null,"Action"))),o.a.createElement("tbody",null,t)),o.a.createElement("center",null,o.a.createElement(W,null)))}}]),a}(n.Component),V=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",email:"",first_name:"",last_name:"",password_confirm:"",users:[],newUserData:{username:"",password:"",email:"",first_name:"",last_name:"",password_confirm:""},mymessage:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleChangef=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleChangef",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;this.setState(Object.assign(this.state.newUserData,{username:this.state.username})),this.setState(Object.assign(this.state.newUserData,{password:this.state.password})),this.setState(Object.assign(this.state.newUserData,{first_name:this.state.first_name})),this.setState(Object.assign(this.state.newUserData,{last_name:this.state.last_name})),this.setState(Object.assign(this.state.newUserData,{email:this.state.email})),this.setState(Object.assign(this.state.newUserData,{password_confirm:this.state.password_confirm})),e.preventDefault(),g.a.post("http://royliao.pythonanywhere.com/accounts/register/",this.state.newUserData).then((function(e){t.state.users.push(e.data),t.setState({mymessage:"User name "+t.state.newUserData.username+" is added!"}),t.setState({username:"",password:"",first_name:"",last_name:"",Password:"",email:"",password_confirm:""})}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Username:",o.a.createElement("input",{name:"username",type:"text",value:this.state.username,onChange:this.handleChange})),o.a.createElement("br",null),o.a.createElement("label",null,"First Name:",o.a.createElement("input",{name:"first_name",type:"text",value:this.state.first_name,onChange:this.handleChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Last Name:",o.a.createElement("input",{name:"last_name",type:"text",value:this.state.last_name,onChange:this.handleChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Email:",o.a.createElement("input",{name:"email",type:"email",value:this.state.email,onChange:this.handleChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Password:",o.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:this.handleChange})),o.a.createElement("br",null),o.a.createElement("label",null,"Confirm Password:",o.a.createElement("input",{name:"password_confirm",type:"password",value:this.state.password_confirm,onChange:this.handleChange})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{type:"submit",value:"Submit"})))}}]),a}(n.Component),Q="https://royliao.pythonanywhere.com/api/article/",X=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={searchkey:"",newseachkey:"",image:"",books:[],newBookData:{title:"",desc:"",year:""},headerInfo:{Authorization:"Token "+localStorage.getItem("authcode")},newBookModal:!1,editBookData:{id:"",title:"",desc:"",year:"",file:""},editBookModal:!1,mymessage:""},n.getsearch2=function(){g.a.get("".concat(Q,"?search=").concat(n.state.searchkey),{headers:n.state.headerInfo}).then((function(e){n.setState({books:e.data},(function(){console.log("title:")}))}))},n.handleImageChange=function(e){n.setState({image:e.target.files[0]})},n.handleInputChanger=function(){n.setState({searchkey:n.search.value},(function(){n.state.searchkey&&n.state.searchkey.length>0?(n.getInfo(),n.UNSAFE_componentWillMount()):n.state.searchkey||window.location.reload(!0)}))},n.getInfo=function(){g.a.get("".concat(Q,"?search=").concat(n.state.searchkey),{headers:n.state.headerInfo}).then((function(e){var t=e.data;n.setState({results:t})}))},n._refreshBooks=n._refreshBooks.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"toggleNewBookModal",value:function(){this.setState({newBookModal:!this.state.newBookModal})}},{key:"toggleEditBookModal",value:function(){this.setState({editBookModal:!this.state.editBookModal})}},{key:"addBook",value:function(){var e=this;g.a.post("".concat(Q),this.state.newBookData,{headers:this.state.headerInfo}).then((function(t){var a=e.state.books;a.push(t.data),e.setState({mymessage:"Book Title "+e.state.newBookData.title+" is added!"}),e.setState({books:a,newBookModal:!1,newBookData:{title:"",desc:"",year:""}})}))}},{key:"editBook",value:function(e,t,a,n,o){this.setState({editBookData:{id:e,title:t,desc:a,year:n,file:o},editBookModal:!this.state.editBookModal})}},{key:"updateBook",value:function(){var e=this,t=this.state.editBookData,a=t.id,n=t.title,o=t.desc,l=t.year;g.a.put("".concat(Q)+this.state.editBookData.id+"/",{id:a,title:n,desc:o,year:l},{headers:this.state.headerInfo}).then((function(t){e._refreshBooks()})),this.setState({mymessage:"Book ID "+this.state.editBookData.id+" is edited!"}),this.setState({editBookModal:!1,editBookData:{id:"",title:"",desc:"",year:""}})}},{key:"deleteBook",value:function(e){var t=this;g.a.delete("".concat(Q)+e+"/",{headers:this.state.headerInfo}).then((function(a){t._refreshBooks(),t.setState({mymessage:"Book ID "+e+" is deleted!"})}))}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;""===this.state.searchkey&&null===this.state.searchkey||g.a.get("".concat(Q,"?search=").concat(this.state.searchkey),{headers:this.state.headerInfo}).then((function(t){e.setState({books:t.data.reverse()})}))}},{key:"UNSAFE_componentWillMount2",value:function(){var e=this;""!==this.state.searchkey||null!==this.state.searchkey?g.a.get("".concat(Q,"?search=").concat(this.state.searchkey),{headers:this.state.headerInfo}).then((function(t){e.setState({books:t.data.reverse()})})):window.location.reload(!1)}},{key:"_refreshBooks",value:function(){var e=this;g.a.get("".concat(Q),{headers:this.state.headerInfo}).then((function(t){e.setState({books:t.data.reverse()})}))}},{key:"render",value:function(){var e=this,t=this.state.books.map((function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",{style:{textAlign:"left",color:"blue",hover:"green"},baseFontStyle:{fontFamily:"Roboto"}},o.a.createElement("a",{onClick:e.editBook.bind(e,t.id,t.title,t.desc,t.year,t.file)},t.title)),o.a.createElement("td",{style:{textAlign:"left"},baseFontStyle:{fontFamily:"Roboto"}},t.desc),o.a.createElement("td",{style:{textAlign:"left"},baseFontStyle:{fontFamily:"Roboto"}},t.year),o.a.createElement("td",null,o.a.createElement("img",{width:"50%",src:t.file,alt:""})))}));return o.a.createElement("div",{className:"App container"},o.a.createElement("center",null,o.a.createElement("div",{class:"row"},o.a.createElement("h4",{style:{marginTop:25}},"List of Suppliers"),"\u2003",o.a.createElement(I.a,{color:"primary",style:{marginTop:25},onClick:this.toggleNewBookModal.bind(this)},"Add Book"),o.a.createElement("input",{input:!0,class:"form-control mr-sm-2",style:{marginLeft:"auto",marginTop:25,width:200},placeholder:"Search for the ..",ref:function(t){return e.search=t},onChange:this.handleInputChanger,onkeypress:"return event.keyCode!=13"}),o.a.createElement(I.a,{id:"btn26",class:"btn btn-outline-success my-2 my-sm-0",color:"primary",style:{marginTop:25},onClick:this.UNSAFE_componentWillMount2.bind(this)},"Search")))," ",o.a.createElement(U,{name:this.state.mymessage}),o.a.createElement("hr",null),o.a.createElement(O.a,{isOpen:this.state.newBookModal,toggle:this.toggleNewBookModal.bind(this)},o.a.createElement(_.a,{toggle:this.toggleNewBookModal.bind(this)},"Add a new book"),o.a.createElement(j.a,null,o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"title"},"Title"),o.a.createElement(T.a,{id:"title",value:this.state.newBookData.title,onChange:function(t){var a=e.state.newBookData;a.title=t.target.value,e.setState({newBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"desc"},"Description"),o.a.createElement(H.d,{type:"textarea",id:"desc",value:this.state.newBookData.desc,onChange:function(t){var a=e.state.newBookData;a.desc=t.target.value,e.setState({newBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"year"},"Year"),o.a.createElement(T.a,{id:"year",value:this.state.newBookData.year,onChange:function(t){var a=e.state.newBookData;a.year=t.target.value,e.setState({newBookData:a})}}))),o.a.createElement(x.a,null,o.a.createElement(x.a,null,o.a.createElement(I.a,{color:"primary",onClick:this.addBook.bind(this)},"Add Book")," ",o.a.createElement(I.a,{color:"secondary",onClick:this.toggleNewBookModal.bind(this)},"Cancel")))),o.a.createElement(O.a,{isOpen:this.state.editBookModal,toggle:this.toggleEditBookModal.bind(this)},o.a.createElement(_.a,{toggle:this.toggleEditBookModal.bind(this)},"Edit a new book"),o.a.createElement(j.a,null,o.a.createElement(A.a,null,o.a.createElement("div",null,o.a.createElement("img",{width:"50%",src:this.state.editBookData.file,alt:""}))),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"title"},"Title"),o.a.createElement(T.a,{id:"title",value:this.state.editBookData.title,onChange:function(t){var a=e.state.editBookData;a.title=t.target.value,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"desc"},"Description"),o.a.createElement(H.d,{type:"textarea",value:this.state.editBookData.desc,rows:"5",onChange:function(t){var a=e.state.editBookData;a.desc=t.target.value,e.setState({editBookData:a})}})),o.a.createElement(A.a,null,o.a.createElement(N.a,{for:"year"},"Year"),o.a.createElement(T.a,{id:"year",value:this.state.editBookData.year,onChange:function(t){var a=e.state.editBookData;a.year=t.target.value,e.setState({editBookData:a})}}))),o.a.createElement(x.a,null,o.a.createElement(I.a,{color:"secondary",onClick:this.toggleEditBookModal.bind(this)},"Cancel"))),o.a.createElement(F.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"#"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Desc"),o.a.createElement("th",null,"Year"),o.a.createElement("th",null,"Image"))),o.a.createElement("tbody",null,t)),o.a.createElement("center",null,o.a.createElement(W,null)))}}]),a}(n.Component),Z=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={count:0},n}return Object(i.a)(a,[{key:"increase",value:function(e){var t=this;this.setState({count:this.state.count+e},(function(){console.log("count",t.state.count)}))}},{key:"tosignup",value:function(){return o.a.createElement("div",null,o.a.createElement(V,null))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"count - ",this.state.count),o.a.createElement(I.a,{onClick:function(){return e.increase(5)}},"increase"))}}]),a}(n.Component),$=a(10);o.a.Component;function ee(e){""===localStorage.getItem("authcode")?(S.a,$.c):(S.a,$.c);var t=Object(n.useState)(!1),a=Object(k.a)(t,2),l=a[0],r=a[1];return o.a.createElement($.a,null,o.a.createElement("div",null,o.a.createElement(f.a,{color:"light",light:!0,expand:"md"},o.a.createElement(p.a,{href:"/books-app"},o.a.createElement("h1",null,"EasyGo")),o.a.createElement(y.a,{onClick:function(){return r(!l)}}),o.a.createElement(v.a,{isOpen:l,navbar:!0},o.a.createElement(b.a,{className:"mr-auto",navbar:!0},o.a.createElement(B.a,null,o.a.createElement(S.a,{className:"inactive",activeClassName:"active",exact:!0,to:"/",tag:$.c},"Home")),o.a.createElement(B.a,null,o.a.createElement(S.a,{tag:$.c,to:"/accounts",className:"inactive",activeClassName:"active"},"Accounts")),o.a.createElement(w.a,{nav:!0,inNavbar:!0},o.a.createElement(C.a,{nav:!0,caret:!0},"Sales"),o.a.createElement(D.a,{right:!0},o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/suppliers",tag:$.c},"About1")),o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/suppliers",tag:$.c},"About2")),o.a.createElement(M.a,{divider:!0}),o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/",tag:$.c},"About3")))),o.a.createElement(B.a,null,o.a.createElement(S.a,{exact:!0,to:"/books-app",className:"inactive",activeClassName:"active",tag:$.c},"Suppliers")),o.a.createElement(B.a,null,o.a.createElement(S.a,{exact:!0,to:"/suppliers",className:"inactive",activeClassName:"active",tag:$.c},"Warehouse")),o.a.createElement(w.a,{nav:!0,inNavbar:!0},o.a.createElement(C.a,{nav:!0,caret:!0},"Setting"),o.a.createElement(D.a,{right:!0},o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/suppliers",tag:$.c},"About1")),o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/suppliers",tag:$.c},"About1")),o.a.createElement(M.a,{divider:!0}),o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/accounts",tag:$.c},"Report")))),o.a.createElement(w.a,{nav:!0,inNavbar:!0},o.a.createElement(C.a,{nav:!0,caret:!0},"User"),o.a.createElement(D.a,{right:!0},o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/login",tag:$.c},"Sign in")),o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/signup",tag:$.c},"Sign Up ")),o.a.createElement(M.a,{divider:!0}),o.a.createElement(M.a,null,o.a.createElement(S.a,{exact:!0,to:"/logout",tag:$.c},"Sign Out"))))),o.a.createElement(S.a,{onClick:function(){localStorage.setItem("accesstoken",{Authorization:"Token "}),localStorage.setItem("authcode",""),window.location.reload(!0)}},"Log out    ",e.user)))),o.a.createElement("div",null,o.a.createElement("hr",null),o.a.createElement(E.d,null,o.a.createElement(E.b,{exact:!0,path:"/"},o.a.createElement(te,null)),o.a.createElement(E.b,{path:"/accounts"},o.a.createElement(ae,null)),o.a.createElement(E.b,{path:"/suppliers"},o.a.createElement(ne,null)),o.a.createElement(E.b,{path:"/books-app"},o.a.createElement(te,null)),o.a.createElement(E.b,{path:"/suppliers"},o.a.createElement(ne,null)),o.a.createElement(E.b,{path:"/login2"},o.a.createElement(le,null)),o.a.createElement(E.b,{path:"/login"},o.a.createElement(re,null)),o.a.createElement(E.b,{path:"/logout"},o.a.createElement(se,null)),o.a.createElement(E.b,{path:"/signup"},o.a.createElement(oe,null)))))}function te(){var e=localStorage.getItem("permito").includes(98)?o.a.createElement("div",null,o.a.createElement(G,null)):localStorage.getItem("permito").includes(97)?o.a.createElement("div",null,o.a.createElement(X,null)," "):o.a.createElement("div",null,"Ding !not allowed");return o.a.createElement("div",null,e)}function ae(){return o.a.createElement("div",null,o.a.createElement(z,null),o.a.createElement("h2",null,"About roy"))}function ne(){return o.a.createElement("div",null,o.a.createElement(K,null))}function oe(){return o.a.createElement("div",null,o.a.createElement(V,null))}function le(){return o.a.createElement("div",null,o.a.createElement(ie,null))}var re=function(){return o.a.createElement(E.a,{to:"/login2"})};function se(){return localStorage.setItem("accesstoken",{Authorization:"Token "}),localStorage.setItem("authcode",""),o.a.createElement("div",null,"you have logged out, Login ",o.a.createElement("a",{href:"/books-app"},"here "),"again.",o.a.createElement("div",null,"Thank you to web surf here. This is the logout page content for guests!"))}var ie=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={tok:localStorage.getItem("authcode"),signupform:"",permit:[]},n.state={username:"",password:""},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.handleuser=n.handleuser.bind(Object(h.a)(n)),n}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({signupform:o.a.createElement("div",null)})}},{key:"handleChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),g.a.post("".concat("https://royliao.pythonanywhere.com/api-token-auth/"),this.state).then((function(e){return console.log(e.data.token),localStorage.setItem("accesstoken",{Authorization:"Token "+e.data.token}),localStorage.setItem("authcode",e.data.token),t.setState((function(){return{tok:localStorage.getItem("authcode")}})),t.setState((function(){return{tok:localStorage.getItem("authcode")}})),localStorage.setItem("usern",t.state.username),g.a.get("http://royliao.pythonanywhere.com/users/retrieve/andyliao/"+t.state.username).then((function(e){t.setState({permit:e}),alert(t.state.permit[0])})),t.state.tok})).catch((function(e){e.response?(alert(e.response.data.non_field_errors+" Please try with correct user name and password!"),console.log(e.response.data),console.log(e.response.status)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})),this.setState({password:""}),this.handleuser(this.state.username)}},{key:"handleuser",value:function(e){var t=this;g.a.get("http://royliao.pythonanywhere.com/users/retrieve/"+e).then((function(e){t.setState({permit:e.data}),localStorage.setItem("permito",t.state.permit)})).catch((function(e){e.response?(alert(e.response.data.non_field_errors+" Please try with correct user name and password!"),console.log(e.response.data),console.log(e.response.status)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))}},{key:"render",value:function(){var e=this,t=this.state.signupform;return o.a.createElement("div",null,""==localStorage.getItem("authcode")?o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Username:",o.a.createElement("input",{name:"username",type:"text",value:this.state.username,onChange:this.handleChange})),o.a.createElement("label",null,"Password:",o.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:this.handleChange})),o.a.createElement("input",{type:"submit",value:"Submit"})),o.a.createElement("div",{style:{marginTop:20}},"not a user? You can ",o.a.createElement("span",{style:{color:"blue"},onClick:function(){e.setState({signupform:o.a.createElement("div",null,"User Register",o.a.createElement(V,null))})}},"click here to sign up"),o.a.createElement("div",{style:{marginTop:20}},t),o.a.createElement(Z,null))):o.a.createElement(ee,{user:this.state.username,permit:this.state.permit}))}}]),a}(n.Component),ce=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App container"},o.a.createElement(ie,null))}}]),a}(n.Component);r.a.render(o.a.createElement(ce,null),document.getElementById("root"))},70:function(e,t,a){e.exports=a(126)},79:function(e,t,a){},97:function(e,t,a){},98:function(e,t){}},[[70,1,2]]]);
//# sourceMappingURL=main.b94d0e6a.chunk.js.map